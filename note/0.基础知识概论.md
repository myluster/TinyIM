首先我们需要明确一点基础的知识概念，只需要有大概的了解就好了，具体的会在后面的笔记介绍。
#  架构模式：从单体到微服务
## 什么是微服务?
**微服务**是一种架构风格，它将一个单一的应用程序开发为一组小型服务。
- **核心特征**：
    - **独立性**：每个服务运行在自己的进程中（例如 `auth_server` 和 `chat_server` 是两个独立的 `.exe` 或容器）。
    - **单一职责**：每个服务只专注于做一件事（认证服务只管发 Token，不存聊天记录）。
    - **轻量级通信**：服务之间通过轻量级机制（本项目使用 gRPC）进行交互。

> **对比：
> - **单体**：所有功能（登录、聊天、文件）都在一个项目里，编译出一个文件。内存共享，函数直接调用。
> - **微服务**：功能拆分，独立编译，物理隔离。
## 什么是分布式系统?
**分布式系统**是指一组独立的计算机（或容器），它们通过网络协调工作，对外表现为一个统一的系统。
- **核心特征**：
    - **无共享内存**：网关服务无法直接读取认证服务的内存变量，必须通过网络传输数据（序列化/反序列化）。
    - **可扩展性**：这是分布式的核心优势。如果聊天的人多了，我们可以启动 10 个 `chat_server` 副本，而不需要修改代码。
    - **高可用**：如果其中一台机器挂了，其他机器可以顶上。
    
# 通信基石：RPC 与 Proto
## RPC (Remote Procedure Call)
- **定义**：远程过程调用。让调用远程计算机上的函数就像调用本地函数一样简单。
- **在本项目中**：gRPC 是框架，Protobuf 是协议。

## 网关 (Gateway)
- **定义**：分布式系统的“前台”或“流量调度员”。
- **作用**：
    - **统一入口**：客户端不需要知道后端有多少个服务，只跟网关建立连接（WebSocket）。
    - **协议转换**：对外是 WebSocket/HTTP，对内是 gRPC。
    - **路由分发**：根据消息类型（`MessageType`），把请求转发给 `Auth` 或 `Chat` 服务。

# 基础设施
- **Docker (容器化)**：
    - 把代码和运行环境（Ubuntu, Libs）打包在一起。确保“在我的机器上能跑，在服务器上也能跑”。
- **配置分离 (Configuration)**：
    - 代码中不写死 IP 和密码，通过 YAML 文件或环境变量注入。这是微服务灵活部署的关键。